<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giphy API #3</title>
</head>
<body>
    <form id="form">
    <input type="text" id="user-input" required>
    <button type="submit">find</button>
    </form>
    <button id="delete">Delete</button>
    <div id="gif-container"></div>

  <script>

    const form = document.getElementById("form");
    const userInput = document.getElementById("user-input");
    const gifContainer = document.getElementById("gif-container");
    const deleteBtn = document.getElementById("delete");

    const apiKey = "N75kdjYpsP26alILG9NnSGhTMBZaLDgU";
    
    form.addEventListener("submit", async (e) => {
        e.preventDefault();
        const request = userInput.value.trim();
        
        if (!request) return;

        try {
            const response = await fetch(
                `https://api.giphy.com/v1/gifs/random?api_key=${apiKey}&q=${request}`
            );

            if (!response.ok) {
                throw new Error("Error fetching gifs: " + response.status);
            }

            const data = await response.json();

            //ajouter gifs
            data.data.forEach(element => {
                const img = document.createElement("img");
                img.src = gif.images.fixed_height.url;
                gifContainer.appendChild(img);
            });
        }
        catch (err) {
            console.log("error",err);
            alert("Could not fetch GIFs. Try again.");
        }
    });

    //delete button
    deleteBtn.addEventListener("click", () => {
        gifContainer.innerHTML = "";
    });

    
    </script>
    
</body>
</html>